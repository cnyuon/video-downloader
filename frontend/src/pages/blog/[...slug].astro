---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await post.render();

// Category mapping helper
const CATEGORY_LABELS: Record<string, string> = {
    'vpn': 'Privacy & VPN',
    'software': 'Video Editing',
    'hosting': 'Creator Tech',
    'storage': 'Storage',
    'creator-tools': 'Growth Tools',
    'none': 'Guide'
};

const category = post.data.monetization?.primary_category 
    ? CATEGORY_LABELS[post.data.monetization.primary_category] 
    : 'Guide';
---

<Layout 
	title={`${post.data.title} | MediaTools Blog`}
	description={post.data.description}
>
	<Navbar client:load currentPage="blog" />
	
	<main class="container mx-auto px-4 pt-10 pb-16 max-w-4xl">
        <!-- Back Link -->
        <a href="/blog" class="inline-flex items-center text-sm text-muted-foreground hover:text-primary mb-8 transition-colors">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
            Back to Blog
        </a>

		<article class="mx-auto">
			<div class="mb-8 text-center max-w-2xl mx-auto">
                <span class="inline-block px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium mb-4">
                    {category}
                </span>
				<h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-6 leading-tight">{post.data.title}</h1>
			</div>
			
			{post.data.heroImage && (
				<div class="rounded-2xl overflow-hidden shadow-xl mb-12 aspect-video bg-muted">
                    <img 
                        src={post.data.heroImage} 
                        alt={post.data.title} 
                        class="w-full h-full object-cover transform hover:scale-105 transition-transform duration-700"
                    />
                </div>
			)}
			
            <div class="prose prose-lg dark:prose-invert mx-auto max-w-2xl 
                prose-headings:font-bold prose-headings:tracking-tight 
                prose-a:text-primary prose-a:font-medium prose-a:no-underline hover:prose-a:underline 
                prose-img:rounded-xl prose-img:shadow-lg">
				<Content />
			</div>
		</article>

        <!-- Related Tools Section -->
        <div class="mt-20 pt-12 border-t max-w-2xl mx-auto">
            <h2 class="text-2xl font-bold mb-6">Tools Mentioned in This Post</h2>
            <div class="grid gap-4 sm:grid-cols-2">
                <a href="/tiktok-downloader" class="group flex items-center gap-4 p-4 rounded-xl border bg-card hover:border-primary/50 hover:shadow-md transition-all">
                    <div class="w-10 h-10 rounded-lg bg-black flex items-center justify-center text-white shrink-0 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.321 5.562a5.124 5.124 0 0 1-.443-.258 6.228 6.228 0 0 1-1.137-.966c-.849-.849-1.18-1.69-1.333-2.338h.003c-.11-.467-.073-.77-.066-.77h-3.547v13.473c0 .181 0 .359-.008.534a3.874 3.874 0 0 1-.022.287l-.001.021v.011a2.9 2.9 0 0 1-.881 1.838 2.87 2.87 0 0 1-2.028.824 2.9 2.9 0 0 1-2.9-2.9 2.9 2.9 0 0 1 2.9-2.9c.304 0 .596.049.868.138v-3.6a6.391 6.391 0 0 0-.868-.059 6.45 6.45 0 0 0-4.568 1.868A6.387 6.387 0 0 0 3.4 15.9a6.4 6.4 0 0 0 .389 2.187 6.452 6.452 0 0 0 1.5 2.1 6.437 6.437 0 0 0 4.568 1.88 6.45 6.45 0 0 0 4.568-1.88 6.394 6.394 0 0 0 1.89-4.568V9.55a9.372 9.372 0 0 0 5.49 1.77V7.77s-2.485.097-4.484-2.208z"/></svg>
                    </div>
                    <div>
                        <h3 class="font-semibold group-hover:text-primary transition-colors">TikTok Downloader</h3>
                        <p class="text-sm text-muted-foreground">Download without watermark</p>
                    </div>
                </a>
                <a href="/instagram-downloader" class="group flex items-center gap-4 p-4 rounded-xl border bg-card hover:border-primary/50 hover:shadow-md transition-all">
                    <div class="w-10 h-10 rounded-lg bg-gradient-to-tr from-yellow-400 to-purple-600 flex items-center justify-center text-white shrink-0 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                    </div>
                    <div>
                        <h3 class="font-semibold group-hover:text-primary transition-colors">Instagram Downloader</h3>
                        <p class="text-sm text-muted-foreground">Save Reels in HD</p>
                    </div>
                </a>
            </div>
        </div>
	</main>

    <footer class="border-t py-8 mt-8">
        <div class="container mx-auto px-4 text-center text-sm text-muted-foreground">
            <p>Â© 2026 MediaTools. All rights reserved.</p>
        </div>
    </footer>
</Layout>
